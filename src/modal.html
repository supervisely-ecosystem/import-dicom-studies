<sly-field
  title="Select grouping tag"
  description="All imported images will be grouped by selected tag"
>
  <el-tabs type="border-card" class="el-tabs-cards" v-model="state.tagMode">
    <el-tab-pane name="prepared">
      <el-radio slot="label" v-model="state.tagMode" label="prepared">
        Predefined
      </el-radio>
      <sly-field title="Select predefined DICOM metadata key" description="">
      </sly-field>
      <el-select v-model="state.predefinedGroupTag" placeholder="Select">
        <el-option
          key="StudyInstanceUID"
          label="StudyInstanceUID"
          value="StudyInstanceUID"
        ></el-option>
        <el-option
          key="SeriesInstanceUID"
          label="SeriesInstanceUID"
          value="SeriesInstanceUID"
        ></el-option>
      </el-select>
    </el-tab-pane>
    <el-tab-pane name="manual">
      <el-radio slot="label" v-model="state.tagMode" label="manual">
        Manual
      </el-radio>
      <sly-field title="Input name of DICOM metadata key" description="">
        <el-input
          v-model="state.manualGroupTag"
          placeholder="Name of the grouping tag e.g. Manufacturer"
        ></el-input>
      </sly-field>
    </el-tab-pane>
  </el-tabs>

  <!--    <pre>-->
  <!--        {{ JSON.stringify(state, undefined, 2) }}-->
  <!--    </pre>-->

  <sly-card title="" class="mt10">
    <div>
      <el-checkbox v-model="state.withAnns"
        >Add annotations (supervisely format)</el-checkbox
      >
    </div>
    <div>
      <el-checkbox :disabled="state.addAllTagsFromDcm" v-model="state.addTagsFromDcm"
        >Add tags from DICOM metadata</el-checkbox
      >
    </div>
    <div>
      <el-checkbox v-if="state.addTagsFromDcm" v-model="state.addTagsFromDcm"
        >Add all tags from DICOM metadata</el-checkbox
      >
    </div>
    <div v-if="state.addTagsFromDcm && !state.addAllTagsFromDcm" class="mt10">
      <sly-copy-to-clipboard>
        <sly-editor
          v-model="state.dcmTags"
          :options="{mode: 'ace/mode/json', showGutter: false, readOnly: false, maxLines: 100, highlightActiveLine: true}"
        >
        </sly-editor>
      </sly-copy-to-clipboard>
    </div>
  </sly-card>
</sly-field>
